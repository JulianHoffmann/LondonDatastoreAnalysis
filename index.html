<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="By University College London - UCL - Julian Hoffmann Anton">
<meta name="description" content="A deep-dive from an academic’s, an analyst’s and GIS researcher’s perspective demonstrating common workflows integrating the London Datastore. The proposed recommendations and modifications for the Future London Datastore are designed to enhance the Datastore as the premier choice for analysts seeking up-to-date and precise data on London">

<title>LONDON DATASTORE: Workflow, recommendations and challenges from a data analyst´s perspective</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="London Datastore Reasearch - UCL_files/libs/clipboard/clipboard.min.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/quarto-html/quarto.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/quarto-html/popper.min.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/quarto-html/anchor.min.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="London Datastore Reasearch - UCL_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="London Datastore Reasearch - UCL_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="London Datastore Reasearch - UCL_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #27445C;
      }
</style>
<script src="London Datastore Reasearch - UCL_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="London Datastore Reasearch - UCL_files/libs/vis-9.1.0/vis-network.min.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="London Datastore Reasearch - UCL_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="London Datastore Reasearch - UCL_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="London Datastore Reasearch - UCL_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="London Datastore Reasearch - UCL_files/libs/leaflet-binding-2.2.0/leaflet.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="London Datastore Reasearch - UCL_files/libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">LONDON DATASTORE: Workflow, recommendations and challenges from a data analyst´s perspective</h1>
                  <div>
        <div class="description">
          A deep-dive from an academic’s, an analyst’s and GIS researcher’s perspective demonstrating common workflows integrating the London Datastore. The proposed recommendations and modifications for the Future London Datastore are designed to enhance the Datastore as the premier choice for analysts seeking up-to-date and precise data on London
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>By University College London - UCL - Julian Hoffmann Anton </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">13-12-2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of content</h2>
   
  <ul>
  <li><a href="#draft---executive-summary" id="toc-draft---executive-summary" class="nav-link active" data-scroll-target="#draft---executive-summary">DRAFT - Executive Summary</a></li>
  <li><a href="#draft---key-recommendations" id="toc-draft---key-recommendations" class="nav-link" data-scroll-target="#draft---key-recommendations">DRAFT - Key Recommendations</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#background-of-the-report" id="toc-background-of-the-report" class="nav-link" data-scroll-target="#background-of-the-report"><span class="header-section-number">1</span> Background of the report</a>
  <ul>
  <li><a href="#previous-research-to-design-the-future-london-datastore" id="toc-previous-research-to-design-the-future-london-datastore" class="nav-link" data-scroll-target="#previous-research-to-design-the-future-london-datastore"><span class="header-section-number">1.1</span> Previous Research to design the future London Datastore</a></li>
  </ul></li>
  <li><a href="#a-modern-data-analysis-mapping-project-workflow" id="toc-a-modern-data-analysis-mapping-project-workflow" class="nav-link" data-scroll-target="#a-modern-data-analysis-mapping-project-workflow"><span class="header-section-number">2</span> A modern data analysis &amp; mapping project workflow</a>
  <ul>
  <li><a href="#exploring-data-and-finding-data" id="toc-exploring-data-and-finding-data" class="nav-link" data-scroll-target="#exploring-data-and-finding-data"><span class="header-section-number">2.1</span> Exploring data and finding data</a></li>
  <li><a href="#tools-for-data-and-maps" id="toc-tools-for-data-and-maps" class="nav-link" data-scroll-target="#tools-for-data-and-maps"><span class="header-section-number">2.2</span> Tools for Data and Maps</a></li>
  <li><a href="#modern-geographic-information-science-tools" id="toc-modern-geographic-information-science-tools" class="nav-link" data-scroll-target="#modern-geographic-information-science-tools"><span class="header-section-number">2.3</span> Modern Geographic Information Science tools</a></li>
  <li><a href="#empowering-the-catalog-with-better-meta-data" id="toc-empowering-the-catalog-with-better-meta-data" class="nav-link" data-scroll-target="#empowering-the-catalog-with-better-meta-data"><span class="header-section-number">2.4</span> Empowering the catalog with better meta data</a>
  <ul>
  <li><a href="#meta-data-analysis-of-the-current-catalog" id="toc-meta-data-analysis-of-the-current-catalog" class="nav-link" data-scroll-target="#meta-data-analysis-of-the-current-catalog"><span class="header-section-number">2.4.1</span> Meta-data analysis of the current catalog</a>
  <ul class="collapse">
  <li><a href="#loading-all-the-metadata-of-the-datastore-as-of-22.11.2023" id="toc-loading-all-the-metadata-of-the-datastore-as-of-22.11.2023" class="nav-link" data-scroll-target="#loading-all-the-metadata-of-the-datastore-as-of-22.11.2023"><span class="header-section-number">2.4.1.1</span> Loading all the metadata of the Datastore as of 22.11.2023</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#update-frequency" id="toc-update-frequency" class="nav-link" data-scroll-target="#update-frequency"><span class="header-section-number">2.5</span> Update frequency</a></li>
  <li><a href="#data-publishers" id="toc-data-publishers" class="nav-link" data-scroll-target="#data-publishers"><span class="header-section-number">2.6</span> Data Publishers</a></li>
  <li><a href="#data-authors" id="toc-data-authors" class="nav-link" data-scroll-target="#data-authors"><span class="header-section-number">2.7</span> Data Authors</a>
  <ul>
  <li><a href="#meta-data-interconnection" id="toc-meta-data-interconnection" class="nav-link" data-scroll-target="#meta-data-interconnection"><span class="header-section-number">2.7.0.1</span> Meta data interconnection</a></li>
  <li><a href="#a-network-analysis-approach" id="toc-a-network-analysis-approach" class="nav-link" data-scroll-target="#a-network-analysis-approach"><span class="header-section-number">2.7.0.2</span> A Network analysis approach</a></li>
  <li><a href="#granular-tag-analysis" id="toc-granular-tag-analysis" class="nav-link" data-scroll-target="#granular-tag-analysis"><span class="header-section-number">2.7.0.3</span> Granular Tag Analysis</a></li>
  </ul></li>
  <li><a href="#data-access-and-formats" id="toc-data-access-and-formats" class="nav-link" data-scroll-target="#data-access-and-formats"><span class="header-section-number">2.8</span> Data access and formats</a></li>
  </ul></li>
  <li><a href="#apis-and-the-future-of-real-time-data" id="toc-apis-and-the-future-of-real-time-data" class="nav-link" data-scroll-target="#apis-and-the-future-of-real-time-data"><span class="header-section-number">3</span> APIs and the future of real-time data</a>
  <ul>
  <li><a href="#accessing-the-meta-data-through-the-api" id="toc-accessing-the-meta-data-through-the-api" class="nav-link" data-scroll-target="#accessing-the-meta-data-through-the-api"><span class="header-section-number">3.1</span> Accessing the meta data through the API</a></li>
  <li><a href="#tidy-data-principles" id="toc-tidy-data-principles" class="nav-link" data-scroll-target="#tidy-data-principles"><span class="header-section-number">3.2</span> Tidy data principles</a></li>
  <li><a href="#loading-geographic-data" id="toc-loading-geographic-data" class="nav-link" data-scroll-target="#loading-geographic-data"><span class="header-section-number">3.3</span> Loading Geographic Data</a></li>
  <li><a href="#exploratory-analysis-and-data-wrangling" id="toc-exploratory-analysis-and-data-wrangling" class="nav-link" data-scroll-target="#exploratory-analysis-and-data-wrangling"><span class="header-section-number">3.4</span> Exploratory Analysis and data wrangling</a>
  <ul>
  <li><a href="#filter-data" id="toc-filter-data" class="nav-link" data-scroll-target="#filter-data"><span class="header-section-number">3.4.1</span> Filter Data</a></li>
  <li><a href="#sub-setting-selecting-and-filtering-the-data." id="toc-sub-setting-selecting-and-filtering-the-data." class="nav-link" data-scroll-target="#sub-setting-selecting-and-filtering-the-data."><span class="header-section-number">3.4.2</span> Sub-setting, selecting and filtering the data.</a></li>
  <li><a href="#data-transformation-splitting-aggregating-summarising-etc." id="toc-data-transformation-splitting-aggregating-summarising-etc." class="nav-link" data-scroll-target="#data-transformation-splitting-aggregating-summarising-etc."><span class="header-section-number">3.4.3</span> Data Transformation (splitting, aggregating, summarising etc.)</a></li>
  <li><a href="#data-and-merging" id="toc-data-and-merging" class="nav-link" data-scroll-target="#data-and-merging"><span class="header-section-number">3.4.4</span> Data and merging</a></li>
  <li><a href="#data-filtering-and-sorting" id="toc-data-filtering-and-sorting" class="nav-link" data-scroll-target="#data-filtering-and-sorting"><span class="header-section-number">3.4.5</span> Data Filtering and sorting</a></li>
  <li><a href="#data-correcting-cleaning" id="toc-data-correcting-cleaning" class="nav-link" data-scroll-target="#data-correcting-cleaning"><span class="header-section-number">3.4.6</span> Data correcting / cleaning</a></li>
  <li><a href="#gap-filling-modelling" id="toc-gap-filling-modelling" class="nav-link" data-scroll-target="#gap-filling-modelling"><span class="header-section-number">3.4.7</span> Gap filling / modelling</a></li>
  <li><a href="#data-formatting-and-pivoting-wide-to-long-long-to-wide" id="toc-data-formatting-and-pivoting-wide-to-long-long-to-wide" class="nav-link" data-scroll-target="#data-formatting-and-pivoting-wide-to-long-long-to-wide"><span class="header-section-number">3.4.8</span> Data formatting and pivoting (wide to long / long to wide)</a></li>
  <li><a href="#geocoding" id="toc-geocoding" class="nav-link" data-scroll-target="#geocoding"><span class="header-section-number">3.4.9</span> Geocoding</a></li>
  <li><a href="#storing-retrieving-updating" id="toc-storing-retrieving-updating" class="nav-link" data-scroll-target="#storing-retrieving-updating"><span class="header-section-number">3.4.10</span> Storing / retrieving / updating</a></li>
  <li><a href="#data-persistence-and-linking-to-historical-data-and-updates-etc." id="toc-data-persistence-and-linking-to-historical-data-and-updates-etc." class="nav-link" data-scroll-target="#data-persistence-and-linking-to-historical-data-and-updates-etc."><span class="header-section-number">3.4.11</span> Data persistence and linking to historical data and updates etc.</a></li>
  <li><a href="#example-london-static-map" id="toc-example-london-static-map" class="nav-link" data-scroll-target="#example-london-static-map"><span class="header-section-number">3.4.12</span> Example: London static map</a></li>
  <li><a href="#london-interactive-map" id="toc-london-interactive-map" class="nav-link" data-scroll-target="#london-interactive-map"><span class="header-section-number">3.4.13</span> London Interactive Map</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions"><span class="header-section-number">4</span> Conclusions</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="draft---executive-summary" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="draft---executive-summary">DRAFT - Executive Summary</h2>
<p>This report presents a extensive analysis of the current <a href="https://data.london.gov.uk/" title="The London Datastore">London Datastore</a> (LDS), examining common use cases and improvements to conciser for the future developments and expansions of the platform. It offers an in-depth exploration from three distinct viewpoints with common interests: academic research, data analysis, and Geographic Information System (GIS) research. This multifaceted approach demonstrates typical workflows for integrating data from the London Datastore into various fields of study and application. The proposed recommendations and modifications are designed to enhance the Datastore as the premier choice for analysts seeking up-to-date and precise data on London.</p>
<p>Link to the London Datastore : <a href="https://data.london.gov.uk" class="uri">https://data.london.gov.uk</a></p>
</section>
<section id="draft---key-recommendations" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="draft---key-recommendations">DRAFT - Key Recommendations</h2>
<p>[Provisory hierarchical order]</p>
<ol type="1">
<li><p>Encourage data producers to adopt a standardized approach for data sharing formats, ensuring that dataset format is tidy<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, consistent, and efficient.</p></li>
<li><p>Emphasize on key geographical datasets and mapping shapes the platform that are most commonly used for Geographic Information System (GIS) applications in London.</p></li>
<li><p>Enrich the metadata tagging and labeling, while improving the metadata quality and consistency.</p></li>
<li><p>Highlight the platforms API capabilities and facilitate its use by guiding the user through examples.</p></li>
<li><p>Correct, expand and refine metadata tags to enhance their scope and interconnectivity, fostering discovery of relevant related data.</p></li>
<li><p>Improve the visibility and accuracy of the data’s release dates, and ensure clear indicators are present for data updates and changes.</p></li>
<li><p>Anticipate and adapt to future data-sharing needs by supporting advanced formats and technologies like, point clouds, 3D, APIs and real-time data streams.</p></li>
<li><p>Enhance the user experience for data exploration and navigation, allowing for more intuitive searches and the discovery of relevant new and past data.</p></li>
<li><p>Introduce a better search engine syteme or Large Language model chat bot assistance to explore the data sets available.</p></li>
<li><p>Simplify the process for users to find and utilize published analyses and reports, making them more accessible.</p></li>
<li><p>Clearly differentiate among datasets, analytical reports, and tabular data to prevent confusion and streamline user interaction.</p></li>
<li><p>Ensure that file format information is displayed in a clear, concise, and transparent manner, aiding in user comprehension.</p></li>
<li><p>Provide a succinct description for each dataset to convey its contents and purpose at a glance.</p></li>
<li><p>Implement versatile sorting features, allowing users to filter datasets by relevance, publication date, and other relevant criteria.</p></li>
</ol>
</section>
<section id="introduction" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="introduction">Introduction</h2>
<p><strong>“What do data analysts want from the data they use and where they access it from? What would a bold and visionary approach to data provision (a new data store) look like?”</strong></p>
<p>There is very often a disconnect between how data custodians or producers structure and provide access to their data compared to the needs of potential end users. In this report, we will look into different classes of users, each with their format priorities while at the same time a lot of common interests. The purpose of this study is to inform the London Datastore Team with practical examples of the platform uses and how improvements can make a big difference scaled to all the users of the London Datastore. As data end-users, data analysts, scientists and researchers, how would recommendations from the report on the London Datastore´s Future <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> affect and help users? We will work backwards from them and the outputs to the London Data Store and its sources. We will also elaborate on the effect of the implementation of the Data Services Standard identified in the GLA´s <em>Data Services Investment Proposal (2021)</em> <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> – more specifically, looking at the users needs and problems, how to facilitate the accessibility to data and how some changes will incentivise the use of the platform.</p>
<p>This will lead us to mention the so-called ´<a href="https://r4ds.hadley.nz/data-tidy.html">Tidy Data Principles</a>´<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> and similar frameworks for optimal data set formats and efficient standardisation. We will be in touch with other experts in the topic at UCL who have developed workflows and efficient systems such as the data curation software Whyqd <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. We can draw inspiration from other cities/platforms as well. We will extend the recommendations that are found at the end of ‘Discovering the Future of the London Data Store’ with tangible examples which show how they affect the end-user’s experience. This will also elaborate on the ‘Data Services Investment Proposition(2021)’ section on Data Services Standards From an academic’s, an analyst’s and researcher’s perspective. Different users of the London datastore but with similar workflows.</p>
</section>
<section id="background-of-the-report" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="background-of-the-report"><span class="header-section-number">1</span> Background of the report</h2>
<section id="previous-research-to-design-the-future-london-datastore" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="previous-research-to-design-the-future-london-datastore"><span class="header-section-number">1.1</span> Previous Research to design the future London Datastore</h3>
<p>Our study expands on the findings of extensive research done by GLA and the Open Data Institute. The current improvements identified in the Future of the London Datastore report are the following:</p>
<ol type="1">
<li>Up to date data</li>
<li>Broader datasets and types of data</li>
<li>Metadata and different views for insights</li>
<li>Improving navigation and search function - including expanding categories and better description of them</li>
<li>Offering signpost and updates indicators</li>
<li>Offering different formats – and allowing interactive visualisation and charts, but also better integration between data and analytical outputs</li>
</ol>
<p>We will do the exercise of diving deeper into the workflow affected by the mentioned points and elaborate their impact on analytics projects.</p>
<p>It will include the observation from the <em>“Data Services Investment Proposal (2021) - Appendix B”</em><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> and at the same time, we will expand the <em>“Data Service Standards”</em> proposed concerning the user:</p>
<ol type="1">
<li>Understand users and their needs. Look at the full context to understand what the user is trying to achieve, not just the part where they interact with the GLA. Understanding as much of the context as possible gives you the best chance of meeting users’ needs in a simple and cost effective way. In a data services context, the core “user” may be a particular type of officer in a London Borough, who has their own particular work context to understand.</li>
<li>Solve a whole problem for users. Work towards creating a service that solves one whole problem for users, collaborating across organisational boundaries where necessary. This may mean aligning with other parts of the GLA or central government to combine data or other supporting services, or simply ensuring that the data service can connect seamlessly with related tasks, for example by ensuring that it uses a common language and that data is exportable in a helpful format.</li>
<li>Provide a joined up experience across all channels [less relevant to data services, as they are generally not consumed e.g.&nbsp;offline]</li>
<li>Make the service simple to use: make sure the service helps the user to do the thing they need to do as simply as possible - so that people succeed first time, with the minimum of help; test for usability frequently with actual and potential users, using appropriate research techniques ; design the service to work with a range of devices that reflects users’ behaviour - in a data services context, most services may be delivered to officers’ laptops and desktops, but should take account of security/firewall limitations, browsers, etc in their corporate environments.</li>
<li>Make sure everyone can use the service: where users are officers, this will mainly mean meeting accessibility standards .</li>
</ol>
<p>We will proceed with tangible examples from the users perspective.</p>
</section>
</section>
<section id="a-modern-data-analysis-mapping-project-workflow" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="a-modern-data-analysis-mapping-project-workflow"><span class="header-section-number">2</span> A modern data analysis &amp; mapping project workflow</h2>
<p>This is a hands-on journey from idea to publication highlighting where the London Datastore (LDS) can support and facilitate most user´s workflows. Most research pieces involving data commonly require a series of tasks, transformations and operations which can be extremely time consuming, especially if we aggregate it to the whole user base of the London Datastore. Any improvement will potentially lead to</p>
<section id="exploring-data-and-finding-data" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="exploring-data-and-finding-data"><span class="header-section-number">2.1</span> Exploring data and finding data</h3>
<p>First of all let’s establish the scenarios you as a user will encounter.</p>
<p><strong>A .You know what you are looking for:</strong></p>
<ol type="1">
<li><p>You find what you want and more than you expected. (Best Case)</p></li>
<li><p>You find what you are looking for and nothing else. (Great Case)</p></li>
<li><p>You don’t find what you want but find something useful.(Good case)</p></li>
<li><p>You don’t find what you want and nothing else is useful. (Bad case)</p></li>
</ol>
<p><strong>B. You don’t know what you are looking for:</strong></p>
<ol start="5" type="1">
<li>You discover something to start or influence a project (Excellent case)</li>
<li>The exploration process and data discovered doesn’t inspire you to start a project or include in your projects. (Bad case)</li>
</ol>
<p>Any change on the platform should aim to increase the likelihood of scenarios 1,2,3,5 and decrease 4 and 6. We will gathering recommendations for that purpose.</p>
</section>
<section id="tools-for-data-and-maps" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="tools-for-data-and-maps"><span class="header-section-number">2.2</span> Tools for Data and Maps</h3>
<p>Modern data users will most likely combine several tools to extract insights out of data. Here is as non-exhaustive list of the most commonly used tools (their importances varies by industry, sector and purpose):</p>
<ul>
<li>Excel: A ubiquitous tool for basic data analysis, manipulation, and visualization, especially in business contexts.</li>
</ul>
<!-- -->
<ul>
<li><p>Python: A versatile programming language with extensive libraries for data analysis (e.g., Pandas, NumPy, SciPy, Matplotlib).</p></li>
<li><p>R: A programming language and environment focused on statistical computing and graphics, widely used in academia and research. This report and analysis was created purely with R and RStudio.</p></li>
<li><p>SQL: Essential for managing and querying structured data in relational databases.</p></li>
<li><p>Tableau: A powerful tool for data visualization, enabling the creation of interactive and shareable dashboards.</p></li>
<li><p>Power BI: Microsoft’s business analytics service, providing interactive visualizations and business intelligence capabilities.</p></li>
<li><p>SAS: An integrated software suite for advanced analytics, business intelligence, data management, and predictive analytics.</p></li>
<li><p>SPSS (IBM SPSS Statistics): Widely used for statistical analysis in social science, it offers a range of analytical tools.</p></li>
<li><p>Matlab: A high-level language and interactive environment used heavily in engineering and scientific computing.</p></li>
<li><p>Stata: A tool for data manipulation, visualization, statistics, and automated reporting.</p></li>
</ul>
</section>
<section id="modern-geographic-information-science-tools" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="modern-geographic-information-science-tools"><span class="header-section-number">2.3</span> Modern Geographic Information Science tools</h3>
<ul>
<li><p>ArcGIS: A comprehensive GIS software for creating, analyzing, and managing geographic data, widely used in various industries.</p></li>
<li><p>QGIS (Quantum GIS): An open-source GIS software that supports viewing, editing, and analysis of geospatial data.</p></li>
<li><p>R: Known for its strong statistical capabilities, R has packages like sp, rgdal, and rgeos, which are used for spatial data analysis and visualization.</p></li>
<li><p>Python: A versatile programming language with GIS-focused libraries like Geopandas, Shapely, Fiona, and Pyproj, widely used for scripting and automating GIS processes.</p></li>
</ul>
<p>Now that we know the tools, we have to find the right data.</p>
</section>
<section id="empowering-the-catalog-with-better-meta-data" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="empowering-the-catalog-with-better-meta-data"><span class="header-section-number">2.4</span> Empowering the catalog with better meta data</h3>
<section id="meta-data-analysis-of-the-current-catalog" class="level4" data-number="2.4.1">
<h4 data-number="2.4.1" class="anchored" data-anchor-id="meta-data-analysis-of-the-current-catalog"><span class="header-section-number">2.4.1</span> Meta-data analysis of the current catalog</h4>
<section id="loading-all-the-metadata-of-the-datastore-as-of-22.11.2023" class="level5" data-number="2.4.1.1">
<h5 data-number="2.4.1.1" class="anchored" data-anchor-id="loading-all-the-metadata-of-the-datastore-as-of-22.11.2023"><span class="header-section-number">2.4.1.1</span> Loading all the metadata of the Datastore as of 22.11.2023</h5>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Data/All meta data - export -2023.12.06.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>As researchers and analysts land on a data platform these common questions arise:</p>
<ul>
<li><p>Is this the latest data available? How much of the data is being updated?</p></li>
<li><p>Are old datasets being refreshed?</p></li>
<li><p>Are many new datasets appearing regularly?</p></li>
<li><p>Are these datasets a one off publication?</p></li>
</ul>
<p>The graphs below provide answers and give an overview of the update rates and status.</p>
<p><em>[ ANALYSIS TO BE CONTINUED]</em></p>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert your string to a POSIXct object, making sure to specify the correct timezone if needed</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>vertical_line_datetime <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2020-01-01"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>every_nth <span class="ot">=</span> <span class="cf">function</span>(n) {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cf">function</span>(x) {x[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="fu">rep</span>(<span class="cn">FALSE</span>, n <span class="sc">-</span> <span class="dv">1</span>))]})</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with the adjusted geom_hline for the vertical line</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(metadata <span class="sc">%&gt;%</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="at">short =</span> <span class="fu">str_sub</span>(metadata<span class="sc">$</span>title, <span class="dv">1</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">head</span>(<span class="dv">1200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">arrange</span>(<span class="fu">desc</span>(updatedAt)), </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(title, updatedAt))) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">y=</span>createdAt, <span class="at">yend=</span>updatedAt, <span class="at">xend=</span>title), <span class="at">color=</span><span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>(<span class="at">y=</span>updatedAt), <span class="at">color=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.7</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>(<span class="at">y=</span>createdAt), <span class="at">color=</span><span class="fu">rgb</span>(<span class="fl">0.7</span>,<span class="fl">0.2</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>), <span class="at">size=</span><span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>( <span class="at">yintercept =</span> vertical_line_datetime, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span> <span class="co"># Use geom_hline with yintercept</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.5</span>))) <span class="sc">+</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">every_nth</span>(<span class="at">n =</span> <span class="dv">10</span>))<span class="sc">+</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Title (every 10th of 1168)"</span>) <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Added date and update date"</span>)<span class="sc">+</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Dataset date and update"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"As of 2023.12.06 there are 1166 datasets"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
</section>
</section>
<section id="update-frequency" class="level3" data-number="2.5">
<h3 data-number="2.5" class="anchored" data-anchor-id="update-frequency"><span class="header-section-number">2.5</span> Update frequency</h3>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>chart_df <span class="ot">&lt;-</span> metadata <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(update_frequency) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(update_frequency) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(count))</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> chart_df, <span class="fu">aes</span>(<span class="at">x =</span>count, <span class="at">y =</span> <span class="fu">reorder</span>(update_frequency, (count))))<span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">fill =</span><span class="st">"Steelblue"</span>) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">" "</span>,count, <span class="st">" - "</span>, <span class="fu">round</span>(count<span class="sc">/</span>total,<span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="st">"%"</span>)), <span class="at">hjust =</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span><span class="st">"The distribution of the update frequency available for 1166 datasets"</span>,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">"Number of datasets"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(chart_df<span class="sc">$</span>count) <span class="sc">*</span> <span class="fl">1.15</span>))  <span class="co"># Expanding the limit to 20% more than the max count</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="data-publishers" class="level3" data-number="2.6">
<h3 data-number="2.6" class="anchored" data-anchor-id="data-publishers"><span class="header-section-number">2.6</span> Data Publishers</h3>
<p>The “Greater London Authority (GLA)” label is the largest publisher with 476 datasets equal to 41%, followed by 13% by ONS. 8% of datasets or from publishers which only published one set. This representation also shows that GLA infact has other subcategories of publishers such as the “GLA Opinion research 4%” which combined then represent more than 3/4 of datasets.</p>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>chart_df <span class="ot">&lt;-</span> metadata <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(publisher) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(publisher) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">publisher_2 =</span> <span class="fu">ifelse</span>(count <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"***Single publication only"</span>, <span class="fu">as.character</span>(publisher))) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(publisher_2) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">summ =</span> <span class="fu">sum</span>(count)) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(summ))<span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GLA =</span> (<span class="fu">grepl</span>(<span class="st">"GLA|Greater London Authority"</span>, publisher_2)))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> chart_df, <span class="fu">aes</span>(<span class="at">x =</span>summ, <span class="at">y =</span> <span class="fu">reorder</span>(publisher_2, summ)))<span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> GLA),<span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">" "</span>,summ, <span class="st">" - "</span>, <span class="fu">round</span>(summ<span class="sc">/</span>total,<span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="st">"%"</span>)), <span class="at">hjust =</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span><span class="st">"Publishers of the 1166 datasets"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">"Number of datasets"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Steelblue"</span>, <span class="st">"Darkred"</span>))<span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(chart_df<span class="sc">$</span>summ) <span class="sc">*</span> <span class="fl">1.15</span>))  <span class="co"># Expanding the limit to 20% more than the max count</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="data-authors" class="level3" data-number="2.7">
<h3 data-number="2.7" class="anchored" data-anchor-id="data-authors"><span class="header-section-number">2.7</span> Data Authors</h3>
<p>Most authors only publish 1 or 2 datasets in the LDS with 22% of the catalogue. the Label NA 14% appears for 14% meaning the lack of author or missing information.</p>
<p>We also find Greater London Authority as the most prolific author of datasets, but we also find inconsistent labeling and sub-GLA groups:</p>
<p>Greater London Authority 13%, GLA5%, Greater London Authority (GLA) 1%, GLA Economics 3% etc. Other examples of inconsistent labels happend with Transport for London (TFL) or Census data etc. Correcting these is possible and would make the catalog clearer, more efficient and transparent.</p>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>chart_df <span class="ot">&lt;-</span>metadata <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(author) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(author) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">publisher_2 =</span> <span class="fu">ifelse</span>(count <span class="sc">&lt;=</span> <span class="dv">2</span>, <span class="st">"***1 or 2 publicatiions"</span>, <span class="fu">as.character</span>(author))) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(publisher_2) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">summ =</span> <span class="fu">sum</span>(count))<span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(summ))<span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GLA =</span> (<span class="fu">grepl</span>(<span class="st">"GLA|Greater London Authority"</span>, publisher_2)))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span>chart_df, <span class="fu">aes</span>(<span class="at">x =</span>summ, <span class="at">y =</span> <span class="fu">reorder</span>(publisher_2, summ)))<span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> GLA),<span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">" "</span>,summ)), <span class="at">hjust =</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">" "</span>,summ, <span class="st">" - "</span>, <span class="fu">round</span>(summ<span class="sc">/</span>total,<span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="st">"%"</span>)), <span class="at">hjust =</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span><span class="st">"Authors of the 1166 datasets"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">"Number of datasets"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(chart_df<span class="sc">$</span>summ) <span class="sc">*</span> <span class="fl">1.15</span>)) <span class="sc">+</span> <span class="co"># Expanding the limit to 20% more than the max count</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Steelblue"</span>, <span class="st">"Darkred"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<section id="meta-data-interconnection" class="level5" data-number="2.7.0.1">
<h5 data-number="2.7.0.1" class="anchored" data-anchor-id="meta-data-interconnection"><span class="header-section-number">2.7.0.1</span> Meta data interconnection</h5>
<p>The are currently 18 main tag categories, with many sub-tags. Here is a visualisation to see the co-occurrence of labels in all 1168 data sets.</p>
<p>The diagonal of this table shows the total number of datasets in that category, the largest being “Demographics” with 217 data sets. The other tiles show the co-occurrence of that label with the horizontal topic label (or vertical if you prefer).</p>
<div class="cell" data-warnings="false">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming 'your_matrix' is the 18x18 matrix you want to display</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># your_matrix &lt;- matrix(rnorm(18*18), nrow = 18, ncol = 18)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Convert the matrix to a data frame in long format</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>matrix_long <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(co_occurrence_matrix_18) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"row"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>row, <span class="at">names_to =</span> <span class="st">"column"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">str_replace_all</span>(row, <span class="st">"topic-"</span>, <span class="st">""</span>))<span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">column =</span> <span class="fu">str_replace_all</span>(column, <span class="st">"topic-"</span>, <span class="st">""</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>order_vector <span class="ot">&lt;-</span> metadata <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="fu">starts_with</span>(<span class="st">"topic"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"topic"</span>),<span class="at">names_to =</span><span class="st">"topic"</span>, <span class="at">values_to =</span><span class="st">"is"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(is <span class="sc">==</span> <span class="st">"TRUE"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span> </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_replace_all</span>(topic, <span class="st">"topic-"</span>, <span class="st">""</span>)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>order_vector_1 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(order_vector<span class="sc">$</span>topic)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'row' and 'column' to factors with levels specified by 'order_vector'</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>matrix_long<span class="sc">$</span>row <span class="ot">&lt;-</span> <span class="fu">factor</span>(matrix_long<span class="sc">$</span>row, <span class="at">levels =</span> order_vector_1)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>matrix_long<span class="sc">$</span>column <span class="ot">&lt;-</span> <span class="fu">factor</span>(matrix_long<span class="sc">$</span>column, <span class="at">levels =</span> order_vector_1)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(matrix_long, <span class="fu">aes</span>(<span class="at">x =</span> column, <span class="at">y =</span> row, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(value, <span class="dv">2</span>)), <span class="at">vjust =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>) <span class="sc">+</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span><span class="st">"Matrix of co-occurrence of topics"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="a-network-analysis-approach" class="level5" data-number="2.7.0.2">
<h5 data-number="2.7.0.2" class="anchored" data-anchor-id="a-network-analysis-approach"><span class="header-section-number">2.7.0.2</span> A Network analysis approach</h5>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<div id="htmlwidget-d6a0e6faa71a1bea1f98" style="width:100%;height:900px;" class="visNetwork html-widget "></div>
<script type="application/json" data-for="htmlwidget-d6a0e6faa71a1bea1f98">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],"label":["business-and-economy","championing-london","crime-and-community-safety","demographics","education","employment-and-skills","environment","health","housing","art-and-culture","london-2012","planning","sport","transparency","transport","young-people","income-poverty-welfare","covid-19"],"degree":[340,122,262,332,299,364,301,295,336,134,21,218,151,197,233,274,227,98],"size":[34,12.2,26.2,33.2,29.9,36.4,30.1,29.5,33.6,13.4,2.1,21.8,15.1,19.7,23.3,27.4,22.7,9.800000000000001],"color":["#162875","#96D6B8","#206BAE","#1A2B7E","#23439B","#081D58","#23439B","#23479D","#182A79","#85CFBA","#F7FCC8","#2599C0","#6BC5BD","#33A8C2","#1D88BB","#225BA6","#1D90BF","#BFE6B4"],"x":[0.8641970593650605,-0.4465221678958159,-0.002742126409667645,-0.2114366996440203,0.06646461576576512,0.4270704461979586,-0.302335481447196,0.7713800160023687,-0.3301676789138765,0.08551880367317666,-1,0.2703647478603786,0.4557764337823971,0.07478945167535977,-0.5871240927610205,0.4843659314496775,0.8367970109014056,1],"y":[0.3328785742215381,-0.2150984622497641,0.9384087009364488,0.2742320125752584,-1,1,-0.6982197841967299,0.7501746640483178,0.7486258053584327,-0.537021697294096,-0.4766142526027911,0.4501008426272028,-0.8147868783906385,-0.043730453862591,0.3205902732388619,-0.1637923988046903,-0.5500511249583477,-0.08148690073438392]},"edges":{"from":[1,1,2,1,2,3,1,2,3,4,1,2,3,4,5,1,2,3,4,5,6,1,2,3,4,5,6,7,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,9,2,3,4,5,7,9,10,1,2,3,4,5,6,7,8,9,10,11,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,14,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17],"to":[2,3,3,4,4,4,5,5,5,5,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],"value":[17,19,7,31,6,17,22,7,19,31,59,9,21,42,44,22,6,16,12,16,16,15,7,19,32,22,22,32,20,6,18,41,27,28,36,25,16,8,6,9,9,13,5,11,9,1,2,1,1,2,1,2,26,7,5,17,6,7,48,8,45,4,1,5,4,11,8,12,9,11,16,12,10,4,3,18,10,50,7,7,14,16,11,10,5,2,11,8,17,8,17,17,16,18,32,18,16,4,2,13,17,12,16,7,17,29,37,29,14,26,20,10,2,6,13,8,13,20,9,14,23,17,24,13,18,18,9,7,7,6,10,22,17,3,4,9,6,9,4,13,4,4,4,1,2,3,5,10],"width":[2.88135593220339,3.220338983050847,1.186440677966102,5.254237288135593,1.016949152542373,2.88135593220339,3.728813559322034,1.186440677966102,3.220338983050847,5.254237288135593,10,1.525423728813559,3.559322033898305,7.11864406779661,7.457627118644067,3.728813559322034,1.016949152542373,2.711864406779661,2.033898305084746,2.711864406779661,2.711864406779661,2.542372881355932,1.186440677966102,3.220338983050847,5.423728813559322,3.728813559322034,3.728813559322034,5.423728813559322,3.389830508474576,1.016949152542373,3.050847457627119,6.949152542372881,4.576271186440678,4.745762711864407,6.101694915254238,4.23728813559322,2.711864406779661,1.35593220338983,1.016949152542373,1.525423728813559,1.525423728813559,2.203389830508474,0.847457627118644,1.864406779661017,1.525423728813559,0.1694915254237288,0.3389830508474576,0.1694915254237288,0.1694915254237288,0.3389830508474576,0.1694915254237288,0.3389830508474576,4.406779661016949,1.186440677966102,0.847457627118644,2.88135593220339,1.016949152542373,1.186440677966102,8.135593220338983,1.35593220338983,7.627118644067796,0.6779661016949152,0.1694915254237288,0.847457627118644,0.6779661016949152,1.864406779661017,1.35593220338983,2.033898305084746,1.525423728813559,1.864406779661017,2.711864406779661,2.033898305084746,1.694915254237288,0.6779661016949152,0.5084745762711864,3.050847457627119,1.694915254237288,8.474576271186439,1.186440677966102,1.186440677966102,2.372881355932203,2.711864406779661,1.864406779661017,1.694915254237288,0.847457627118644,0.3389830508474576,1.864406779661017,1.35593220338983,2.88135593220339,1.35593220338983,2.88135593220339,2.88135593220339,2.711864406779661,3.050847457627119,5.423728813559322,3.050847457627119,2.711864406779661,0.6779661016949152,0.3389830508474576,2.203389830508474,2.88135593220339,2.033898305084746,2.711864406779661,1.186440677966102,2.88135593220339,4.915254237288136,6.271186440677966,4.915254237288136,2.372881355932203,4.406779661016949,3.389830508474576,1.694915254237288,0.3389830508474576,1.016949152542373,2.203389830508474,1.35593220338983,2.203389830508474,3.389830508474576,1.525423728813559,2.372881355932203,3.898305084745763,2.88135593220339,4.067796610169491,2.203389830508474,3.050847457627119,3.050847457627119,1.525423728813559,1.186440677966102,1.186440677966102,1.016949152542373,1.694915254237288,3.728813559322034,2.88135593220339,0.5084745762711864,0.6779661016949152,1.525423728813559,1.016949152542373,1.525423728813559,0.6779661016949152,2.203389830508474,0.6779661016949152,0.6779661016949152,0.6779661016949152,0.1694915254237288,0.3389830508474576,0.5084745762711864,0.847457627118644,1.694915254237288],"color":["#FCB094","#FCA285","#FEE2D5","#F86043","#FEE4D7","#FCB094","#FC9272","#FEE2D5","#FCA285","#F86043","#67000D","#FDD8C7","#FC997A","#D42120","#CB181D","#FC9272","#FEE4D7","#FCB398","#FCC9B3","#FCB398","#FCB398","#FCBAA0","#FEE2D5","#FCA285","#F6583F","#FC9272","#FC9272","#F6583F","#FC9F81","#FEE4D7","#FCA98D","#DA2623","#FB7858","#FB7252","#EF3E2E","#FB8262","#FCB398","#FDDECF","#FEE4D7","#FDD8C7","#FDD8C7","#FCC3AB","#FEE7DC","#FDCFBB","#FDD8C7","#FEF3ED","#FEEFE8","#FEF3ED","#FEF3ED","#FEEFE8","#FEF3ED","#FEEFE8","#FB7B5B","#FEE2D5","#FEE7DC","#FCB094","#FEE4D7","#FEE2D5","#B61318","#FDDECF","#C5161B","#FEEAE1","#FEF3ED","#FEE7DC","#FEEAE1","#FDCFBB","#FDDECF","#FCC9B3","#FDD8C7","#FDCFBB","#FCB398","#FCC9B3","#FDD5C3","#FEEAE1","#FEECE3","#FCA98D","#FDD5C3","#AD1016","#FEE2D5","#FEE2D5","#FCC0A7","#FCB398","#FDCFBB","#FDD5C3","#FEE7DC","#FEEFE8","#FDCFBB","#FDDECF","#FCB094","#FDDECF","#FCB094","#FCB094","#FCB398","#FCA98D","#F6583F","#FCA98D","#FCB398","#FEEAE1","#FEEFE8","#FCC3AB","#FCB094","#FCC9B3","#FCB398","#FEE2D5","#FCB094","#FB6B4B","#EE3A2B","#FB6B4B","#FCC0A7","#FB7B5B","#FC9F81","#FDD5C3","#FEEFE8","#FEE4D7","#FCC3AB","#FDDECF","#FCC3AB","#FC9F81","#FDD8C7","#FCC0A7","#FB8F6F","#FCB094","#FB8868","#FCC3AB","#FCA98D","#FCA98D","#FDD8C7","#FEE2D5","#FEE2D5","#FEE4D7","#FDD5C3","#FC9272","#FCB094","#FEECE3","#FEEAE1","#FDD8C7","#FEE4D7","#FDD8C7","#FEEAE1","#FCC3AB","#FEEAE1","#FEEAE1","#FEEAE1","#FEF3ED","#FEEFE8","#FEECE3","#FEE7DC","#FDD5C3"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","labelHighlightBold":true,"color":{"background":["#162875","#96D6B8","#206BAE","#1A2B7E","#23439B","#081D58","#23439B","#23479D","#182A79","#85CFBA","#F7FCC8","#2599C0","#6BC5BD","#33A8C2","#1D88BB","#225BA6","#1D90BF","#BFE6B4"],"border":["#162875","#96D6B8","#206BAE","#1A2B7E","#23439B","#081D58","#23439B","#23479D","#182A79","#85CFBA","#F7FCC8","#2599C0","#6BC5BD","#33A8C2","#1D88BB","#225BA6","#1D90BF","#BFE6B4"]},"font":{"face":"arial","size":18},"physics":false},"manipulation":{"enabled":false},"edges":{"width":"width","color":{"color":["#FCB094","#FCA285","#FEE2D5","#F86043","#FEE4D7","#FCB094","#FC9272","#FEE2D5","#FCA285","#F86043","#67000D","#FDD8C7","#FC997A","#D42120","#CB181D","#FC9272","#FEE4D7","#FCB398","#FCC9B3","#FCB398","#FCB398","#FCBAA0","#FEE2D5","#FCA285","#F6583F","#FC9272","#FC9272","#F6583F","#FC9F81","#FEE4D7","#FCA98D","#DA2623","#FB7858","#FB7252","#EF3E2E","#FB8262","#FCB398","#FDDECF","#FEE4D7","#FDD8C7","#FDD8C7","#FCC3AB","#FEE7DC","#FDCFBB","#FDD8C7","#FEF3ED","#FEEFE8","#FEF3ED","#FEF3ED","#FEEFE8","#FEF3ED","#FEEFE8","#FB7B5B","#FEE2D5","#FEE7DC","#FCB094","#FEE4D7","#FEE2D5","#B61318","#FDDECF","#C5161B","#FEEAE1","#FEF3ED","#FEE7DC","#FEEAE1","#FDCFBB","#FDDECF","#FCC9B3","#FDD8C7","#FDCFBB","#FCB398","#FCC9B3","#FDD5C3","#FEEAE1","#FEECE3","#FCA98D","#FDD5C3","#AD1016","#FEE2D5","#FEE2D5","#FCC0A7","#FCB398","#FDCFBB","#FDD5C3","#FEE7DC","#FEEFE8","#FDCFBB","#FDDECF","#FCB094","#FDDECF","#FCB094","#FCB094","#FCB398","#FCA98D","#F6583F","#FCA98D","#FCB398","#FEEAE1","#FEEFE8","#FCC3AB","#FCB094","#FCC9B3","#FCB398","#FEE2D5","#FCB094","#FB6B4B","#EE3A2B","#FB6B4B","#FCC0A7","#FB7B5B","#FC9F81","#FDD5C3","#FEEFE8","#FEE4D7","#FCC3AB","#FDDECF","#FCC3AB","#FC9F81","#FDD8C7","#FCC0A7","#FB8F6F","#FCB094","#FB8868","#FCC3AB","#FCA98D","#FCA98D","#FDD8C7","#FEE2D5","#FEE2D5","#FEE4D7","#FDD5C3","#FC9272","#FCB094","#FEECE3","#FEEAE1","#FDD8C7","#FEE4D7","#FDD8C7","#FEEAE1","#FCC3AB","#FEEAE1","#FEEAE1","#FEEAE1","#FEF3ED","#FEEFE8","#FEECE3","#FEE7DC","#FDD5C3"]},"smooth":false},"interaction":{"hover":true,"zoomSpeed":1},"physics":{"stabilization":false}},"groups":null,"width":"100%","height":"900px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":true,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="granular-tag-analysis" class="level5" data-number="2.7.0.3">
<h5 data-number="2.7.0.3" class="anchored" data-anchor-id="granular-tag-analysis"><span class="header-section-number">2.7.0.3</span> Granular Tag Analysis</h5>
<p>There are many more sub-tags beyond the main 18 categories. Without correcting for typos and different spellings, there are 1551 different tags. It is important to re-emphasize and create a new systematic tagging system for a richer meta-data ecosystem, for data exploration and easier search method for the catalogue.</p>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/Is%20here%20an%20error-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>The vast majority of tags appears less than 5 times. More tagging could help link datasets and create clusters beyond the 18 main categories. Search engines and large language model (LLM) assistants would benefit from it of it and help users.</p>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="data-access-and-formats" class="level3" data-number="2.8">
<h3 data-number="2.8" class="anchored" data-anchor-id="data-access-and-formats"><span class="header-section-number">2.8</span> Data access and formats</h3>
<p>Encountered issues:</p>
<ul>
<li><p>There isn’t a clear distingtion between <em>Raw Tabular</em> data from <em>Reports and Publications</em> in pdf: https://data.london.gov.uk/dataset/2021-census-first-release</p></li>
<li><p>Hundreds of pdfs in one place, without a summary or short description. https://data.london.gov.uk/dataset/aberfeldy-estate-consultation-documents-16-november—16-december</p></li>
<li><p>Inconvenient formats: column names are in a separate file from the data: https://data.london.gov.uk/dataset/london-fire-brigade-incident-records</p></li>
<li><p>Outdated: Shapes for geographic boundaries and files. For London we had to go directly to ONS to look for the latest geographic boundaries, something required for most GIS and mapping work in London. <a href="https://www.ons.gov.uk/methodology/geography/ukgeographies/censusgeographies/census2021geographies">Link to the latest CENSUS geography</a> ^[Latest CENSUS 2021 Geographies: https://www.ons.gov.uk/methodology/geography/ukgeographies/censusgeographies/census2021geographies]</p></li>
<li><p>The flow of exploration of data sets is not optimal. Long scrolling is necessary, without sorting options by date or other relevant dimensions. The filtering options could be improved as well with with access to.</p></li>
<li><p>Outdated data links. Crowd-source the update-control process by adding a possibility for users to signal the London Data Store team when a link is broken or a new link or data source is available. Example of broken links: ^[Broken Links to tfl api : https://data.london.gov.uk/dataset/tfl-live-bus-arrivals-api] ^[Broken link to tl planner: https://data.london.gov.uk/dataset/journey-planner-api-beta] ^[ Broken linkt to tfl feeds: https://tfl.gov.uk/info-for/open-data-users/our-feeds]</p></li>
<li><p>Include and highlight more the date of the data set or there is a risk it may be outdated or havecurrently broken link.</p></li>
<li><p>There aren’t any links to LiDAR data sets, which are public 3D data sets.The store could potentially link to governmental open-access LiDAR sources Governmental open-access LiDAR source: https://www.data.gov.uk/dataset/f0db0249-f17b-4036-9e65-309148c97ce4/national-lidar-programme</p></li>
</ul>
</section>
</section>
<section id="apis-and-the-future-of-real-time-data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="apis-and-the-future-of-real-time-data"><span class="header-section-number">3</span> APIs and the future of real-time data</h2>
<p>The API pipeline is not easily visible on the store and could be put forward as key asset of the platform for developers and advanced data science users.</p>
<p>API documentation is prensent but there is no tangible example to facilitate the use of it. You have to be already a an advanced user to access it or spent a significant amount of time to discover the possibilities.</p>
<p><strong>[ANALYSIS TO BE CONTINUED]</strong></p>
<section id="accessing-the-meta-data-through-the-api" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="accessing-the-meta-data-through-the-api"><span class="header-section-number">3.1</span> Accessing the meta data through the API</h3>
<div class="cell" data-warnings="false">
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
</div>
</section>
<section id="tidy-data-principles" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="tidy-data-principles"><span class="header-section-number">3.2</span> Tidy data principles</h3>
<p>A huge amount of effort is spent cleaning data to get it ready for analysis, this is known burden in the Data Science world. Hadley wickham developed a framework that makes it easy to tidy messy data sets. The definition is simple: structure: each variable is a column, each observation is a row, and each type of observational unit is a table. Tidy data sets are easy to manipulate, model and visualize. We will show the advantages of a consistent data structures with case studies from the London Datastore and how everyone could benefit from it by beeing freed from mundane and long data manipulation chores.</p>
<p>Tidy Data - Hadley Wickham synthesize and created this efficient framework in Data Science and data architecture published in a now <a href="https://www.jstatsoft.org/article/view/v059i10">acclaimed publication of Journal of Statistical Software</a> <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> and is the best practisse amongs data scientists and researchers.</p>
</section>
<section id="loading-geographic-data" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="loading-geographic-data"><span class="header-section-number">3.3</span> Loading Geographic Data</h3>
<p>Geographic data is a major pillar of the London Datastore due the fact that most of its data sets contain spatial elements in form of coordinates, administrative boundaries or other geographic boundaries. Making the access to the most commonly used shapes easy, simple and friction-less could significantly improve the efficiency and use of the platform.</p>
<p>Another complementary option would be cataloguing or creating a list for London a list of links to the latest relevant GIS resources such as Ordnance Survey (OS)<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> , Office of national Statisticis (ONS)<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> or CENSUS geographies (ONS)<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<p><img src="London-Datastore-Reasearch---UCL_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exploratory-analysis-and-data-wrangling" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="exploratory-analysis-and-data-wrangling"><span class="header-section-number">3.4</span> Exploratory Analysis and data wrangling</h3>
<section id="filter-data" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="filter-data"><span class="header-section-number">3.4.1</span> Filter Data</h4>
</section>
<section id="sub-setting-selecting-and-filtering-the-data." class="level4" data-number="3.4.2">
<h4 data-number="3.4.2" class="anchored" data-anchor-id="sub-setting-selecting-and-filtering-the-data."><span class="header-section-number">3.4.2</span> Sub-setting, selecting and filtering the data.</h4>
<p>For research in London there is often required to look at national level or regional levels datasets and then there is the need to narrow it down to the 32 Boroughs and the City. Any help or national dataset that can be sub-set and filtered to the Greater London Area and stored in the LDC would be a great asset and support for analytics.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># # Filter for MSOAs in London based on the known London boroughs</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># london_boroughs &lt;- c("City of London", "Camden", "Greenwich", "Hackney", "Hammersmith and Fulham",</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                      "Islington", "Kensington and Chelsea", "Lambeth", "Lewisham", "Southwark",</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                      "Tower Hamlets", "Wandsworth", "Westminster", "Barking and Dagenham", "Barnet",</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#                      "Bexley", "Brent", "Bromley", "Croydon", "Ealing", "Enfield", "Haringey",</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#                      "Harrow", "Havering", "Hillingdon", "Hounslow", "Kingston upon Thames",</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#                      "Merton", "Newham", "Redbridge", "Richmond upon Thames", "Sutton", "Waltham Forest")</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># # Combine them into a single regular expression</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># london_filter &lt;- paste(london_boroughs, collapse = "|")</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># # Use this pattern with str_detect in a filter</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co"># london_sf &lt;- london_boundaries_sf %&gt;%</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   as_tibble() %&gt;%</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(str_detect(MSOA21NM, london_filter))%&gt;%</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   st_as_sf()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-transformation-splitting-aggregating-summarising-etc." class="level4" data-number="3.4.3">
<h4 data-number="3.4.3" class="anchored" data-anchor-id="data-transformation-splitting-aggregating-summarising-etc."><span class="header-section-number">3.4.3</span> Data Transformation (splitting, aggregating, summarising etc.)</h4>
<p><strong>[ANALYSIS TO BE CONTINUED]</strong></p>
</section>
<section id="data-and-merging" class="level4" data-number="3.4.4">
<h4 data-number="3.4.4" class="anchored" data-anchor-id="data-and-merging"><span class="header-section-number">3.4.4</span> Data and merging</h4>
<p><strong>[ANALYSIS TO BE CONTINUED or EXAMPLES TO BE ADDED ]</strong></p>
</section>
<section id="data-filtering-and-sorting" class="level4" data-number="3.4.5">
<h4 data-number="3.4.5" class="anchored" data-anchor-id="data-filtering-and-sorting"><span class="header-section-number">3.4.5</span> Data Filtering and sorting</h4>
<p><strong>[ANALYSIS TO BE CONTINUED or EXAMPLES TO BE ADDED ]</strong></p>
</section>
<section id="data-correcting-cleaning" class="level4" data-number="3.4.6">
<h4 data-number="3.4.6" class="anchored" data-anchor-id="data-correcting-cleaning"><span class="header-section-number">3.4.6</span> Data correcting / cleaning</h4>
<p><strong>[ANALYSIS TO BE CONTINUED or EXAMPLES TO BE ADDED ]</strong></p>
</section>
<section id="gap-filling-modelling" class="level4" data-number="3.4.7">
<h4 data-number="3.4.7" class="anchored" data-anchor-id="gap-filling-modelling"><span class="header-section-number">3.4.7</span> Gap filling / modelling</h4>
<p><strong>[ANALYSIS TO BE CONTINUED or EXAMPLES TO BE ADDED ]</strong></p>
</section>
<section id="data-formatting-and-pivoting-wide-to-long-long-to-wide" class="level4" data-number="3.4.8">
<h4 data-number="3.4.8" class="anchored" data-anchor-id="data-formatting-and-pivoting-wide-to-long-long-to-wide"><span class="header-section-number">3.4.8</span> Data formatting and pivoting (wide to long / long to wide)</h4>
<p><strong>[ANALYSIS TO BE CONTINUED or EXAMPLES TO BE ADDED ]</strong> One of the most common data operations at the start of any analysis in EXcel, R, Python, transformations</p>
</section>
<section id="geocoding" class="level4" data-number="3.4.9">
<h4 data-number="3.4.9" class="anchored" data-anchor-id="geocoding"><span class="header-section-number">3.4.9</span> Geocoding</h4>
<p><strong>[ANALYSIS TO BE CONTINUED]</strong></p>
<p>When coordinates are missing or geographic shapes are apsent, GIS analysts and researchers need to apply Geocoding, which in spatial data science refers to the process of converting addresses or other geographic descriptors into numerical coordinates on the Earth’s surface. Typically, this involves transforming a description like a street address, city name, or postal code into a precise latitude and longitude. These coordinates can then be used for various purposes such as mapping, spatial analysis, and geographic data visualization.</p>
</section>
<section id="storing-retrieving-updating" class="level4" data-number="3.4.10">
<h4 data-number="3.4.10" class="anchored" data-anchor-id="storing-retrieving-updating"><span class="header-section-number">3.4.10</span> Storing / retrieving / updating</h4>
</section>
<section id="data-persistence-and-linking-to-historical-data-and-updates-etc." class="level4" data-number="3.4.11">
<h4 data-number="3.4.11" class="anchored" data-anchor-id="data-persistence-and-linking-to-historical-data-and-updates-etc."><span class="header-section-number">3.4.11</span> Data persistence and linking to historical data and updates etc.</h4>
</section>
<section id="example-london-static-map" class="level4" data-number="3.4.12">
<h4 data-number="3.4.12" class="anchored" data-anchor-id="example-london-static-map"><span class="header-section-number">3.4.12</span> Example: London static map</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(london_sf) +</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_sf()+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_minimal()+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = "London MSOAs")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># london_sf2&lt;- london_sf %&gt;% st_as_sf(coords = c(y =LONG, x = LAT)) %&gt;% st_transform(4326)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># london_sf2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="london-interactive-map" class="level4" data-number="3.4.13">
<h4 data-number="3.4.13" class="anchored" data-anchor-id="london-interactive-map"><span class="header-section-number">3.4.13</span> London Interactive Map</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the leaflet map with the shapefile</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>leaflet_map <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>OpenStreetMap) <span class="co">#%&gt;% # Adding a basemap</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># addPolygons(data = london_sf2) # Adding the shapefile</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  leaflet_map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3e7fdb701a325eed36c3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3e7fdb701a325eed36c3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]}]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>
<section id="conclusions" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="conclusions"><span class="header-section-number">4</span> Conclusions</h2>
<p>[Conclusions to be added]</p>
</section>


<div id="quarto-appendix"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Tidy data format definition: link<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>(2019 - ODI link)<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>(link to appendix B/*)<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Tidy Data Principles: https://r4ds.hadley.nz/data-tidy.html<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Whyqd : https://whyqd.com/<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Data Services Investment Proposal (2021) - Appendix B<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Tidy Data: https://www.jstatsoft.org/article/view/v059i10<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Ordnance Survey: https://www.ordnancesurvey.co.uk/products/boundary-line<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>ONS Link https://geoportal.statistics.gov.uk/search?collection=Dataset&amp;sort=name&amp;tags=all(BDY_ADM)<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Census geographies: https://www.ons.gov.uk/methodology/geography/ukgeographies/censusgeographies/census2021geographies<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="London Datastore Reasearch - UCL_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>
